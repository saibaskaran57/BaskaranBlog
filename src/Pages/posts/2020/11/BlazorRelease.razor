@page "/posts/2020/11/BlazorRelease"


<div class="post-header">
    @PostHeader
</div>

<div class="post-sub-header">
    <span class="tags">C#</span>
    <span class="tags">Blazor</span>
    <span>&middot;</span>
    <span>Posted on @PostDate</span>
    <span>&middot;</span>
    <span>@PostReadDuration read</span>
</div>

<div class="post-image">
    <img src="@PostBaseImage/javier-allegue-barros-header.jpg" alt="Blazor" class="image" />
    Photo by <a href="https://unsplash.com/&commat;soymeraki">Javier Allegue Barros</a> on Unsplash
</div>

<div class="post-body">
    <p>
        Microsoft have announced the release of .NET 5 which it's globally available. I'm pretty excited on what
        .NET 5 can bring improvements to the .NET ecosystem and to my blog. Worthy of a upgrade to .NET 5? Let's
        see!
    </p>
    <p>
        <h4>In closing</h4>
        There are several benefits on .NET 5 which ultimately grows Blazor technology. I'm impressed on the efforts on Blazor
        WebAssembly technology which will eventually be a norm. It seems to me that the focus was ultimately on improving performance,
        my future post will definitely review on the underlying functionality & metrics as well. Till then, good luck with the .NET 5
        upgrade.
    </p>
    <p>
        <h4>Netlify</h4>
        Microsoft released Azure Static Web Apps(Preview) on Build 2020.The best explanation about this is that "<i>I got my website up
        running in <strong>5 minutes</strong></i>". In my opinion, probably the fastest to get your application to the internet today. I
        would say Azure Static Web Apps provides service to accelarate the CI/CD process from local development to deploying to the cloud.
        <br />
        <br />
        <h5>Pre-requisites</h5>
        <ul>
            <li><a href="https://app.netlify.com/signup?_ga=2.172406691.1290708335.1605870673-1378412957.1605275049">Netlify account</a></li>
            <li>GitHub</li>
            <li>
                Add <code>_redirects</code> file to <code>wwwroot</code> folder
                (More information right <a href="https://docs.netlify.com/configure-builds/file-based-configuration/#redirects">here</a>)
                <br />
                <div class="note warning">
                    <i class="fas fa-info-circle"></i> Warning:
                    <br />
                    Consequences of not doing so will end <kbd>404 Not Found</kbd> when application is refreshed/navigate directly to locations.
                </div>
                <br />
                <div class="terminal-header">
                    TXT
                </div>
                <div class="terminal-body">
                    <span class="break">[[redirects]]</span>
                    <span class="break">from = "/*"</span>
                    <span class="break">to = "/index.html"</span>
                    <span class="break"> status = 200</span>
                </div>
            </li>
        </ul>
        <h5>Steps to setup & deploy</h5>
        <ol>
            <li>Login to <a href="https://app.netlify.com/?_ga=2.252991497.1290708335.1605870673-1378412957.1605275049">Netlify Portal</a></li>
            <li>
                Click <strong>New Site From Git</strong>
                <br />
                <img src="@PostBaseImage/netlify-step-1.jpg" alt="Netlify step 1" class="image" />
            </li>
            <li>
                Choose Git Provider
                <br />
                <img src="@PostBaseImage/netlify-step-2.jpg" alt="Netlify step 2" class="image" />
            </li>
            <li>
                Pick a repository that you would want to deploy
                <br />
                <img src="@PostBaseImage/netlify-step-3.jpg" alt="Netlify step 3" class="image" />
            </li>
            <li>
                Configure accordingly and leaving <strong>Build command</strong> & <strong>Publish directory empty</strong>.
                <br />
                <img src="@PostBaseImage/netlify-step-4.jpg" alt="Netlify step 4" class="image-vertical" />
            </li>
            <li>
                Once configured, click <strong>Deploy Site</strong>. On success, you will be redirected to the page below:
                <br />
                <img src="@PostBaseImage/netlify-step-5.jpg" alt="Netlify step 5" class="image" />
            </li>
            <li>
                From the navigation, go to <strong>Deploys</strong> and click <strong>Deploy settings</strong>
                <br />
                <img src="@PostBaseImage/netlify-step-6.jpg" alt="Netlify step 6" class="image" />
            </li>
            <li>
                Netlify <u>does not support .NET core build within their infrastructure</u> and therefore, we will require to do via GitHub CI/CD pipeline.
                Click <strong>Edit settings</strong>
                <br />
                <img src="@PostBaseImage/netlify-step-7.jpg" alt="Netlify step 7" class="image" />
            </li>
            <li>
                Under Builds, select <strong>Stop builds</strong> and click <strong>Save</strong>.
                <br />
                <img src="@PostBaseImage/netlify-step-8.jpg" alt="Netlify step 8" class="image" />
            </li>
            <li>
                Now, go to User Settings > Applications and you will require to create a Personal access token which named <strong>NETLIFY_AUTH_TOKEN</strong>
                <br />
                <img src="@PostBaseImage/netlify-step-9.jpg" alt="Netlify step 9" class="image" />
            </li>
            <li>
                Go to Site Settings an you will require to copy API ID to be added into secrets which named <strong>NETLIFY_SITE_ID</strong>
                <br />
                <img src="@PostBaseImage/netlify-step-10.jpg" alt="Netlify step 10" class="image" />
            </li>
            <li>
                Go to GitHub source code Settings > Secrets and configure as below:
                <br />
                <img src="@PostBaseImage/netlify-step-11.jpg" alt="Netlify step 11" class="image" />
            </li>
            <li>
                Go to GitHub source code Actions > New Workflow and choose .NET Core
                <br />
                <img src="@PostBaseImage/netlify-step-12.jpg" alt="Netlify step 12" class="image" />
            </li>
            <li>
                Under Edit new file, copy the <code>.yml</code> code and configure as below:
                <br />
                <div class="terminal-header">
                    YML
                </div>
                <div class="terminal-body">
                    <span class="break">name: Netlify CI/CD # Name of the workflow.</span>
                    <span class="break">&nbsp;</span>
                    <span class="break">on:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;push:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branches:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- main</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;pull_request:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types: [opened, synchronize, reopened, closed]</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branches:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- main</span>
                    <span class="break">&nbsp;</span>
                    <span class="break">jobs:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;build_and_deploy_job: <span class="terminal-comment"> #For Netlify Preview</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runs-on: ubuntu-latest</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Build and Deploy Job</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- uses: actions/checkout@v2</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Setup .NET Core</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uses: actions/setup-dotnet@v1 # Setup .NET Core</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dotnet-version: 5.0.100 <span class="terminal-comment"> #Change to your version of .NET Core</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Build</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;working-directory: src <span class="terminal-comment"> #Source directory where wwwroot exist</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run: dotnet build --configuration Release </span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Publish</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;working-directory: src <span class="terminal-comment"> #Source directory where wwwroot exist</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run: dotnet publish -c Release --no-build -o publishoutput</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Deploy</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uses: netlify/actions/cli@master #uses Netlify Cli actions</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env: <span class="terminal-comment">#These are the environment variables added in GitHub Secrets for this repo</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args: deploy --dir=src/publishoutput/wwwroot <span class="terminal-comment">#Push this folder to Netlify Preview</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secrets: '["NETLIFY_AUTH_TOKEN", "NETLIFY_SITE_ID"]' </span>
                    <span class="break">&nbsp;</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;close_pull_request_job: <span class="terminal-comment"> #For Netlify Production</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runs-on: ubuntu-latest</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close Pull Request Job</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- uses: actions/checkout@v2</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Setup .NET Core</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uses: actions/setup-dotnet@v1 # Setup .NET Core</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dotnet-version: 5.0.100 <span class="terminal-comment"> #Change to your version of .NET Core</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Build</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;working-directory: src <span class="terminal-comment"> #Source directory where wwwroot exist</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run: dotnet build --configuration Release </span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Publish</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;working-directory: src <span class="terminal-comment"> #Source directory where wwwroot exist</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run: dotnet publish -c Release --no-build -o publishoutput</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- name: Deploy</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uses: netlify/actions/cli@master #uses Netlify Cli actions</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env: <span class="terminal-comment">#These are the environment variables added in GitHub Secrets for this repo</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with:</span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args: deploy --dir=src/publishoutput/wwwroot --prod <span class="terminal-comment">#Push this folder to Netlify Production</span></span>
                    <span class="break">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secrets: '["NETLIFY_AUTH_TOKEN", "NETLIFY_SITE_ID"]' </span>
                </div>
            </li>
            <li>Click Start commit & now, it will start to build & deploy.</li>
            <li>
                Go to GitHub source code Actions >  Netlify CI/CD, you will notice the below if the build is successful!
                <br />
                <img src="@PostBaseImage/netlify-step-13.jpg" alt="Netlify step 13" class="image" />
            </li>
            <li>Congratulations, you have succesfully provisioned & deployed under <code>https://*.netlify.app</code></li>
        </ol>
    </p>
</div>

<div class="post-footer">
    <SocialMedia Title="@PostHeader" />
</div>

@code {
    private string PostHeader = "Building blog with Blazor - Shipping it!";
    private string PostDate = "20th November 2020";
    private string PostReadDuration = "10 minutes";
    private string PostBaseImage = "/assets/posts/2020/11/blazor-release";
}